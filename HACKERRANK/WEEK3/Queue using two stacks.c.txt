#include <stdio.h>

int main() {
    int q;
    scanf("%d",&q);

    int s1[100000], s2[100000];
    int t1=-1, t2=-1;

    while(q--) {
        int type;
        scanf("%d",&type);

        if(type==1) {
            int x;
            scanf("%d",&x);
            s1[++t1] = x;
        }
        else if(type==2) {
            if(t2==-1) {
                while(t1!=-1) {
                    s2[++t2] = s1[t1--];
                }
            }
            if(t2!=-1) t2--;
        }
        else if(type==3) {
            if(t2==-1) {
                while(t1!=-1) {
                    s2[++t2] = s1[t1--];
                }
            }
            if(t2!=-1) printf("%d\n",s2[t2]);
        }
    }
    return 0;
}
